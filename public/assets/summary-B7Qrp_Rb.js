var p=t=>{throw TypeError(t)};var m=(t,r,e)=>r.has(t)||p("Cannot "+e);var l=(t,r,e)=>(m(t,r,"read from private field"),e?e.call(t):r.get(t)),u=(t,r,e)=>r.has(t)?p("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,e),i=(t,r,e,a)=>(m(t,r,"write to private field"),a?a.call(t,e):r.set(t,e),e);var n,o;class T extends ui.view.DefaultTheme.SummaryUI{constructor(){super();u(this,n);u(this,o);this.listSummary.renderHandler=Laya.Handler.create(this,this.renderSummary,null,!1),this.listSelectedTalents.renderHandler=Laya.Handler.create(this,this.renderTalent,null,!1),this.btnAgain.on(Laya.Event.CLICK,this,this.onAgain)}onAgain(){core.talentExtend(l(this,n)),core.times++,$ui.switchView(UI.pages.MAIN)}init({talents:e,enableExtend:a}){const{summary:s,lastExtendTalent:c}=core;i(this,o,a),this.listSummary.array=[[core.PropertyTypes.HCHR,$lang.UI_Property_Charm],[core.PropertyTypes.HINT,$lang.UI_Property_Intelligence],[core.PropertyTypes.HSTR,$lang.UI_Property_Strength],[core.PropertyTypes.HMNY,$lang.UI_Property_Money],[core.PropertyTypes.HSPR,$lang.UI_Property_Spirit],[core.PropertyTypes.HAGE,$lang.UI_Final_Age],[core.PropertyTypes.SUM,$lang.UI_Total_Judge]].map(([y,h])=>{const d=s[y];return{label:`${h}${$lang.UI_Colon} ${d.value} ${$lang[d.judge]}`,grade:d.grade}}),e.sort(({id:y,grade:h},{id:d,grade:g})=>y==c?-1:d==c?1:g-h),l(this,o)?i(this,n,e[0].id):i(this,n,c),this.listSelectedTalents.array=e}renderSummary(e){const{label:a,grade:s}=e.dataSource;e.label=a,$_.deepMapSet(e,$ui.common.summary[s])}renderTalent(e){const a=e.dataSource;e.label=$_.format($lang.F_TalentSelection,a);const s=$ui.common.card[a.grade];$_.deepMapSet(e,a.id==l(this,n)?s.selected:s.normal),e.getChildByName("blank").pause=a.id!=l(this,n),e.off(Laya.Event.CLICK,this,this.onSelectTalent),e.on(Laya.Event.CLICK,this,this.onSelectTalent,[a.id])}onSelectTalent(e){if(!l(this,o))return $$event("message",["M_DisableExtendTalent"]);e==l(this,n)?i(this,n,null):i(this,n,e),this.listSelectedTalents.refresh()}}n=new WeakMap,o=new WeakMap;export{T as default};
