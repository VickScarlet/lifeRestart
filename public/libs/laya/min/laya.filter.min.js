!function(i){i.un,i.uns,i.static;var a=i.class,n=i.getset,s=(i.__newvec,laya.utils.Browser,laya.utils.Color),r=laya.filters.ColorFilterAction,l=laya.filters.webgl.ColorFilterActionGL,o=laya.filters.Filter,u=laya.filters.webgl.FilterActionGL,c=laya.maths.Matrix,h=(laya.maths.Rectangle,laya.renders.Render),_=(laya.renders.RenderContext,laya.webgl.resource.RenderTarget2D),d=laya.utils.RunDriver,f=(laya.webgl.shader.d2.ShaderDefines2D,laya.display.Sprite,laya.resource.Texture,laya.webgl.shader.d2.value.Value2D),g=function(){function t(){this.data=null}a(t,"laya.filters.FilterAction");var e=t.prototype;return i.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){return null},t}(),y=(a(t,"laya.filters.WebGLFilter"),t.enable=function(){t.isInit||(t.isInit=!0,h.isWebGL&&(d.createFilterAction=function(t){var e;switch(t){case 32:e=new l;break;case 16:e=new p;break;case 8:e=new w}return e}))},t.isInit=!1,t.__init$=function(){d.createFilterAction=function(t){var e;switch(t){case 16:case 8:e=new g;break;case 32:e=new r}return e}},t);function t(){}(function(){function e(t){this.strength=NaN,this.strength_sig2_2sig2_gauss1=[],e.__super.call(this),void 0===t&&(t=4),h.isWebGL&&y.enable(),this.strength=t,this._action=d.createFilterAction(16),this._action.data=this}a(e,"laya.filters.BlurFilter",o);var t=e.prototype;t.callNative=function(t){t.conchModel&&t.conchModel.blurFilter&&t.conchModel.blurFilter(this.strength)},n(0,t,"action",function(){return this._action}),n(0,t,"type",function(){return 16})})(),function(){function r(t,e,i,a){this._color=null,r.__super.call(this),this._elements=new Float32Array(9),void 0===e&&(e=4),void 0===i&&(i=6),void 0===a&&(a=6),h.isWebGL&&y.enable(),this._color=new s(t),this.blur=Math.min(e,20),this.offX=i,this.offY=a,this._action=d.createFilterAction(8),this._action.data=this}a(r,"laya.filters.GlowFilter",o);var t=r.prototype;t.getColor=function(){return this._color._color},t.callNative=function(t){t.conchModel&&t.conchModel.glowFilter&&t.conchModel.glowFilter(this._color.strColor,this._elements[4],this._elements[5],this._elements[6])},n(0,t,"type",function(){return 8}),n(0,t,"action",function(){return this._action}),n(0,t,"offY",function(){return this._elements[6]},function(t){this._elements[6]=t}),n(0,t,"offX",function(){return this._elements[5]},function(t){this._elements[5]=t}),n(0,t,"blur",function(){return this._elements[4]},function(t){this._elements[4]=t})}();var p=function(){function t(){this.data=null,t.__super.call(this)}a(t,"laya.filters.webgl.BlurFilterActionGL",u);var e=t.prototype;return e.setValueMix=function(t){t.defines.add(this.data.type)},e.apply3d=function(t,e,i,a,r){var n=t.getValue("bounds"),s=f.create(1,0);s.setFilters([this.data]),c.EMPTY.identity(),i.ctx.drawTarget(t,0,0,n.width,n.height,c.EMPTY,"src",s),s.setFilters(null)},e.setValue=function(t){t.strength=this.data.strength;var e=this.data.strength/3,e=e*e;this.data.strength_sig2_2sig2_gauss1[0]=this.data.strength,this.data.strength_sig2_2sig2_gauss1[1]=e,this.data.strength_sig2_2sig2_gauss1[2]=2*e,this.data.strength_sig2_2sig2_gauss1[3]=1/(2*Math.PI*e),t.strength_sig2_2sig2_gauss1=this.data.strength_sig2_2sig2_gauss1},n(0,e,"typeMix",function(){return 16}),t}(),w=function(){function t(){this.data=null,this._initKey=!1,this._textureWidth=0,this._textureHeight=0,t.__super.call(this)}a(t,"laya.filters.webgl.GlowFilterActionGL",u);var e=t.prototype;return i.imps(e,{"laya.filters.IFilterActionGL":!0}),e.setValueMix=function(t){},e.apply3d=function(t,e,i,a,r){var n=t.getValue("bounds");t.addValue("color",this.data.getColor());var s=n.width,n=n.height;this._textureWidth=s,this._textureHeight=n;s=c.TEMP;return s.identity(),(n=f.create(1,0)).setFilters([this.data]),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,s,"src",n,null),n=f.create(1,0),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,s,"src",n),null},e.setSpriteWH=function(t){this._textureWidth=t.width,this._textureHeight=t.height},e.setValue=function(t){t.u_offsetX=this.data.offX,t.u_offsetY=-this.data.offY,t.u_strength=1,t.u_blurX=this.data.blur,t.u_blurY=this.data.blur,t.u_textW=this._textureWidth,t.u_textH=this._textureHeight,t.u_color=this.data.getColor()},n(0,e,"typeMix",function(){return 8}),t.tmpTarget=function(t,e,i,a,r){var n=t.getValue("bounds");t.getValue("out").end();var s=_.create(n.width,n.height);s.start();n=t.getValue("color");n&&s.clear(n[0],n[1],n[2],0),t.addValue("tmpTarget",s)},t.startOut=function(t,e,i,a,r){t.getValue("tmpTarget").end();var n=t.getValue("out");n.start();t=t.getValue("color");t&&n.clear(t[0],t[1],t[2],0)},t.recycleTarget=function(t,e,i,a,r){t.getValue("src");t.getValue("tmpTarget").recycle()},t}();i.__init([y])}((window,document,Laya)),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";for(var i in Object.defineProperty(e,"__esModule",{value:!0}),Laya){var a=Laya[i];a&&a.__isclass&&(e[i]=a)}});